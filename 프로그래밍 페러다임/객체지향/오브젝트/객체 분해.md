## 객체 분해

### 프로시저 추상화, 데이터 추상화

현대적인 프로그래밍 언어를 특정 짓는 두 가지 추상화 메커니즘

- **프로시저 추상화**: 소프트웨어가 무엇을 해야 하는지 추상화(기능 분해, 알고리즘 분해)
- **데이터 추상화**: 소프트웨어가 무엇을 알아야 하는지 추상화
  - 데이터 추상화 중심</br>
      타입 추상화 (추상 데이터 타입)</br>
      프로시저 추상화 (객체 지향)
  
### 프로시저 추상화와 기능 분해

#### 알고리즘 분해, 기능 분해

알고리즘 분해, 기능 분해는 기능을 중심으로 시스템을 분리한다. 추상화의 단위는 프로시저다.

#### 프로시저

[프로시저](<메세지와 인터페이스.md#명령-쿼리-분리-법칙>)는 반복적으로 실행되는 작업들을 한 곳에 모아 로직의 재사용과 중복을 방지하는 추상화 기법이다.

프로시저를 추상화라고 부르는 이유는 내부의 상세한 구현을 모르더라도 인터페이스만 알면 프로시저를 사용할 수 있기 때문이다.

전통적인 기능 분해 방법은 하향식 접근법을 따른다.

#### 하향식 접근법

하향식 접근법이란 시스템을 구성하는 가장 최상위 기능을 정의하고 이 최상위 기능을 좀 더 작은 단위의 하위 기능으로 분해해 나가는 방법을 말한다.

기능 분해의 초점은 하나의 문장으로 표현된 기능을 여러 개 더 작은 기능으로 분해하는 것이다. 기능 분해는 책의 목차를 정리하고 그 안에 내용을 채워 넣는 것과 유사하다.

### 하향식 기능 분해의 문제점

하향식 설계와 관련된 모든 문제의 원인은 결합도이다.

- **시스템은 하나의 메인 함수로 구성되어 있지 않음**
  - 어느 시점에 유일한 메인 함수의 개념이 없어지고 시스템은 여러 개의 동등한 수준의 함수 집합으로 성장
- **기능추가 요구사항 변경에 따른 메인 함수의 빈번한 수정**
  - 기존 코드의 수정은 버그 확률을 높힘
    1. 새로운 정상을 추가
    2. 함수의 내부 구현을 수정
    3. 버그 확률 증가
    4. 변경에 취약
- **비즈니스 로직이 사용자 인터페이스와 강하게 결합**
  - 사용자 인터페이스는 시스템 내에서 변경이 매우 잦음
  - 비즈니스 로직은 사용자 인터페이스보다 변경이 적음
- **함수들의 실행 순서를 고정으로 인한 유연성과 재사용성이 저하**
  - 함수의 실행 순서 제약
  - 상위 함수의 문맥에 강하게 결합
  - 다른 함수와 강한 시간적 결합
- **데이터 형식이 변경에 따른 파급 효과를 예측 불가함**
  - 데이터와 함께 변경되는 부분을 하나의 구현 단위로 묶고 외부에서는 제공되는 함수만 잘 이용
  - 퍼블릭 인터페이스가 의존성 관리의 핵심

데이터 변경으로 인한 영향을 최소화하려면 데이터와 함께 변경되는 부분을 그렇지 않은 부분을 명확하게 분리해야 한다. 이러한 문제를 해결하기 위해 정보 은닉과 모듈이라는 개념을 제시한다.

### 하향식 분해가 유용할 때

하향식 분해는 작은 프로그램과 개별 알고리즘에서는 유용하다. 하지만 실제로 동작하는 큰 소프트웨어를 설계에는 부적합하다.

- 설계의 안정화 이후
- 설계의 다양한 측면을 논리적으로 설명, 분석 시
- 알고리즘 문서화

### 정보 은닉과 모듈

퍼블릭 인터페이스를 통해서만 접근하고 변경의 방향에 맞춰 시스템을 분해한다.

#### 정보 은닉

정보 은닉은 외부에 감춰야 하는 비밀에 따라 시스템을 분할하는 모듈 분할 원리이다. 변경이 잦은 부분을 변경이 적은 인터페이스 뒤로 감춘다.

#### 모듈

모듈은 서브 프로그램보다는 책임의 할당이다.

모듈과 기능 분해는 상호 배타적인 관계가 아니다. 모듈로 분해한 후에는 각 모듈 내부를 구현하기 위해 기능 분해를 적용할 수 있다.

기능분해는 필요한 기능들을 순차적으로 찾아가는 탐색의 과정, 모듈 분해는 감춰야 하는 비밀을 선택하고 감추는 보존의 과정이다.

모듈은 복잡성과 변경 가능성을 감춰야 한다.

- **복잡성**
  - 모듈이 너무 복잡하면 이해하고 사용하기 어려움
  - 추상화 가능한 간단한 인터페이스 제공
- **변경 가능성**
  - 외부 인터페이스가 변경되면 변경 시 파급효과가 큼
  - 하나의 모듈 수정으로 해결 가능하도록 캡슐화하고 변경이 적은 인터페이스를 제공

비밀이 반드시 데이터일 필요는 없고, 복잡한 로직이나 변경 가능성이 큰 자료 구조일 수 있다.

### 모듈의 장점과 한계

모듈은 데이터와 함수가 통합된 한 차원 높은 추상화를 제공하는 설계 단위이다.

- **장점**
  - 모듈 내부에만 영향이 감
  - 비즈니스 로직과 사용자 인터페이스의 관심사 분리
  - 전역 변수와 전역 함수를 제거 -> 네임 스페이스 오염 방지
- **한계**
  - 인스턴스 개념 부재
  - 다수의 인스턴스가 존재하는 추상화 메커니즘이 필요 -> 추상 데이터 타입

프로시저 추상화를 보완하기 위해 데이터 추상화의 개념을 제안한다.

### 클래스

객체 지향은 절차 추상화이다.

- 추상화 타입: 오퍼레이션을 기준 추상화
- 클래스: 타입을 기준으로 절차를 추상화
