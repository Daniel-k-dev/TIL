## 책임 할당하기

### 책임 주도 설계를 향해

- **데이터보다 행동을 먼저 결정**
  1. 객체가 수행해야 하는 행동 결정
  2. 필요한 데이터 결정
- **협력하는 문맥 안에서 책임 결정**
  - 책임은 객체간 협력의 관점에서 적합해야 함

#### 책임 주도 설계

1. 시스템이 사용자에게 제공하는 기능 파악
2. 시스템 책임을 작은 책임으로 분할
3. 분할된 책임을 수행할 객체 탐색, 할당
4. 객체가 책임 수행 중 다른 객체의 도움이 필요하면 객체 탐색
5. 해당 객체의 역할과 책임 할당, 두 객체가 협력

### 책임 할당을 위한 GRASP 패턴

GRASP (General Responsiblity Assingment Software Pattern) 객체의 책임을 할당할 때 지침으로 삼을 수 있는 원칙들.

- **도메인 개념에서 출발**
  - 도메인에 대한 개략적인 모습을 그림(상세하지 않아도 됨)
- **높은 응집도, 낮은 결합도**
  - 협력 패턴 중 높은 응집도, 낮은 결합도를 얻을 수 있는 설계를 선택
- **[정보 전문가에게 책임 할당](#정보-전문가에게-책임-할당)**
- **[창조자에게 객체를 생성할 책임 할당](#창조자에게-객체를-생성할-책임-할당)**

#### 정보 전문가에게 책임 할당

객체가 스스로 처리 가능/불가능한 작업을 분리, 불가능한 작업을 외부의 요청으로 처리

1. 메시지를 전송할 객체가 협력을 위해 전송할 메시지 도출
2. 메시지 처리에 필요한 정보를 알고 있는 전문가에게 메시지 할당

#### 창조자에게 객체를 생성할 책임 할당

##### CREATOR 패턴

아래 조건을 최대한 만족하는 b에게 객체 생성 책임을 할당한다.

- b가 a 객체를 포함하거나 참조
- b가 a 객체를 기록
- b가 a 객체를 긴밀하게 작용
- b가 a 객체를 초기화하는 데 필요한 데이터를 소유

### 구현을 통한 검증

#### 코드를 통해 변경의 이유 찾기

- **인스턴스 변수가 초기화되는 시점으로 코드 분리**
  - 응집도가 높은 클래스는 인스턴스 생성시 모든 속성 초기화
  - 응집도가 낮으면 초기화 시점이 제각각
- **메서드들이 인스턴스를 사용하는 방식에 따라 코드 분리**
  - 모든 메서드가 모든 속성을 사용하면 응집도가 높음
  - 메서드마다 사용하는 속성 그룹이 나뉘고 다 다르면 응집도가 낮음

#### 변경으로부터 보호하기

변경의 가능성이 높으면 그 부분을 캡슐화한다.

변경 예상 지점을 식별하고 그 부분에 안정된 인터페이스를 형성하여 책임을 할당한다.
변경을 캡슐화 하도록 책임을 할당하는 것을 PROTECTED VARIATION 패턴이라 한다.

### 책임 주도 설계 대안

빠르게 목적 기능을 완성 후 리팩터링한다

> **리팩터링**: 겉으로 보이는 동작을 그대로 유지하고 내부 구조를 변경한다.

#### 메서드 응집도

응집도가 높은 메서드는 변경되는 이유가 단 하나여야 한다.
