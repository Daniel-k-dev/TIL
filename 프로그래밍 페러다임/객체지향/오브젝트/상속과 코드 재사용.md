# 상속과 코드 재사용

객체 지향에서는 코드를 재사용하기 위해 새로운 코드를 추가한다.

객체 지향에서 상속 외에도 코드를 효과적으로 재사용하는 방법으로 합성이 있다.

합성은 새로운 클래스의 인스턴스 안에 기존 클래스의 인스턴스를 포함하는 방법이다.

## 상속과 중복 코드

### DRY 원칙

> DRY 원칙은 한 번 단 한 번 원칙 또는 단일 지점 제어 원칙이라고 부른다.

요구 사항이 변경됐을 때 두 코드를 함께 수정해야 한다면 이 코드는 중복이다. 중복 여부를 결정하는 기준은 코드가 변경해 반응하는 방식이다.

#### 상속을 위한 경고 1

자식 클래스의 메소드 안에서 super 참조를 이용해 부모 클래스의 메소드를 직접 호출할 경우 두 클래스는 강하게 결합된다. super호출을 제거할 수 있는 방법을 찾아 결합도를 제거하라.

## 취약한 기반 클래스 문제

상속은 코드의 재사용을 위해 캡슐화의 장점을 희석시키고, 구현에 대한 결합도를 높임으로써 객체 지향이 가진 강력함을 반감시킨다.

#### 상속을 위한 경고 2

상속받은 부모 클래스의 메소드가 자식 클래스의 내부 구조에 대한 규칙을 깨뜨릴 수 있다.

#### 상속을 위한 경고 3

자식 클래스가 부모 클래스의 메서드를 오버라이딩할 경우 부모 클래스가 자신의 메서드를 사용하는 방법에 자식 클래스가 결합될 수 있다.

#### 상속을 위한 경고 4

클래스를 상속하면 결합도로 인해 자식 클래스와 부모 클래스의 구현을 영원히 변경하지 않거나, 자식 클래스와 부모 클래스를 동시에 변경하거나 둘 중 하나를 선택할 수밖에 없다.

### 추상화에 의존하자

코드 중복을 제거하기 위해 상속을 도입할 때 따르는 두 가지 원칙이 있다.

- 차이점을 메소드로 추출
- 부모 클래스의 코드를 하위로 내리지 말고 자식 클래스의 코드를 상위로 올려라.

### 차이를 메소드로 추출하라

변하는 것으로부터 변하지 않는 것을 분리하라. 또는 변하는 부분을 찾고 이를 캡슐화하라.

### 중복 코드를 부모 클래스로 올려라

자식 클래스들 사이의 공통점을 부모 클래스로 옮김으로써 상속 계층을 구성할 수 있다.

상속은 어떤 방식으로든 부모 클래스와 자식 클래스를 결합시킨다. 상속 계층 전체에 걸쳐 부작용이 퍼지지 않게 막아야 한다.

## 차이에 의한 프로그래밍

기존 코드와 다른 부분만을 추가함으로써 애플리케이션의 기능을 확장하는 방법을 차이에 의한 프로그래밍이라 한다.

상속의 오염과 남용은 애플리케이션을 이해하고 확장하기 어렵게 만든다. 정말로 필요한 경우에만 상속을 사용하라.
