## 클래스

### 클래스 체계

클래스 내부에 가장 먼저 변수 목록이 나온다.

1. public static 상수
2. private static 변수
3. 비공개 인스턴스 변수(공개 인스턴스 변수가 필요한 경우는 거의 없다.)

그 후 공개 함수가 나오고 공개 함수에서 비공개 함수를 호출하는 순서대로 작성한다.

#### 캡술화

변수와 유틸리티 함수는 가능한 공개하지 않는 편이 낫지만 반드시 숨겨야 하는 법도 없다.

때로 변수와 유틸리티 함수를 protected로 선언해 테스트 코드 접근을 허용하기도 한다. 하지만 이렇게 캡슐화를 풀어주는 결정은 최후의 수단이다.

### 클래스는 작아야한다

클래스는 최소한의 크기를 지향한다.

클래스의 작음의 척도는 클래스가 맡은 책임의 개수이다.(메서드의 개수는 상관없다.)

클래스 이름은 해당 클래스의 책임을 기술해야 한다.

- 클래스 크기를 줄이는 것이 작명의 첫 번째 관문이다. (간결한 이름이 떠오르지 않는다면 클래스 크기가 너무 커서 그렇다.)
- 클래스 이름이 모호하다면 클래스의 책임이 너무 많아서다. Processor, Manager, Super등과 같이 모호한 단어가 있다면 클래스가 여러 책임을 떠안았다는 증거다.
- 클래스 설명은 (if)만일 (and)그리고 (or)~며 (but)하지만을 사용하지 않고 25 단어 내외로 설명 가능해야 한다.

#### 단일 책임 원칙(SRP)

클래스 모듈을 변경할 이유가 단 하나뿐이여야 한다.

책임 또는 변경하는 이유를 파악하다 보면 코드를 추상화하기도 쉬워진다. 더 좋은 추상화가 더 쉽게 떠오른다.

SRP는 객체 지향 설계에서 중요한 개념이다. 하지만 클래스는 설계자가 가장 무시하는 규칙 중 하나다. 이유는 이렇다.

- 프로그램이 돌아갈면 일이 끝났다고 여겨서
- 클래스가 많아지면 큰 그림을 이해하기 어려워져서

SRP를 통해 클래스가 많아지더라도 익힌 내용과 양이 비슷한다. 고로 큰 클래스 몇개가 아니라 작은 클래스 여럿으로 이루어진 시스템이 더 바람직하다.

#### 응집도

- 클래스의 인스턴스 변수의 수가 적어야 한다.
- 각 클래스 메서드는 인스턴스 변수를 하나 이상 사용해야 한다.
- 메서드가 변수를 더 많이 사용할수록 메서드와 클래스의 응집도는 더 높다.
- 응집도가 가장 높은 클래스는 불가능하고 바람직하지 않다.
- 함수를 작게, 매개변수 목록을 짧게 유지한다.

#### 응집도를 유지하면 작은 클래스 여럿이 나온다

큰 함수 하나를 작은 함수 여럿으로 나누기만 해도 클래스 수가 많아진다.

큰 함수 일부를 작은 함수로 추출하려 하는데 작은 함수가 큰 함수 내부에 선언된 변수 여럿을 필요로하면 큰 함수 내 변수들과 해당 함수를 클래스로 추출하면 된다.

### 변경하기 쉬운 클래스

시스템의 변경에는 위험이 따른다. 깨끗한 시스템을 클래스로 체계적으로 정리해 변경에 수반하는 위험을 낮춘다.

클래스 개선에 뛰어드는 계기는 시스템이 변해서여야 한다.

새 기능을 수정하거나 기존 기능을 변경할 때 건드릴 코드가 최소인 시스템 구조가 바람직하다. 이상적인 시스템이라면 새 기능을 추가할 때 시스템을 확장할 뿐 기존 코드를 변경하지 않는다.

#### 변경으로부터 격리

상세한 구현에 의존하는 코드는 테스트가 어렵다.

요구사항이 변함에 따라 코드도 변한다. 상세한 구현에 의존하는 클래스는 구현이 변경될 때 위험에 빠진다. 그래서 인터페이스와 추상 클래스로 구현에 미치는 영향을 격리한다.

변경이 큰 부분을 외부로 추출하는 방식을 사용하면 테스트가 쉬워지고 시스템의 결합도를 낮추며 유연성과 재사용성이 높아진다. 또한 DIP를 따르는 클래스가 나오게 된다. DIP는 클래스가 상세한 구현이 아니라 추상화에 의존해야 하는 원칙이다.
