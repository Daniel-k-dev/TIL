## 함수

### 작게 만들어라

- 함수는 최대한 작게 만들어야 한다.
- if 문 내부 코드 여러줄을 별도 함수로 추출한다. (블록문 내부는 1줄로 유지해야 한다.)
- 중첩 구조가 생길 만큼 복잡하면 안 된다.
- depth를 1에서 2로 유지한다.

### 한 가지만 해라

함수는 한 가지를 해야 한다. 그 한 가지를 잘해야 한다. 그 한 가지만을 해야 한다.

- 함수 내부는 동일한 추상화를 가지는 코드로 유지한다. (추상화는 함수의 복잡한 정도를 의미한다.)
- 함수를 만드는 이유는 여러 단계의 추상화 수준을 만들고 각 단계별로 묶어 코드의 흐름을 매끄럽게 하기 위함이다. 이러한 구조는 함수간 트리구조를 이루게 된다.
- 함수의 추상화 수준이 동일하면 그 함수는 하나의 작업을 수행한다.

함수가 한 가지 일만 하는지 판단하는 방법은 함수 내부의 코드를 의미가 다른 이름으로 추출할 수 없어야 한다.(추상화 수준이 다르기 때문)

### 함수당 추상화 수준은 하나로

함수에서 추상화 수준이 섞이면 코드를 보는 사람이 햇갈린다.

#### 내려가기 규칙

코드는 위에서 아래로 이야기처럼 읽혀야 한다.

한 함수 다음에는 추상화 수준이 한 단계 낮은 함수가 온다. 위에서 아래로 프로그램을 읽으면 함수 추상화 수준이 한 단계씩 낮아져야 한다.

### switch문

switch문은 작게 만들기 어려우며 N개의 작업을 수행한다.

다형성을 이용해 switch문을 피할 수 있다. 추상 팩토리에 switch문을 숨겨 사용한다.

### 서술적인 이름을 사용해라

함수 이름은 길고 서술적인 이름 > 짧고 어려운 이름 이고, 길고 서술적인 이름 > 길고 서술적인 주석 이다.

이름을 붙일 때 일관성이 있어야 한다. 모듈 내 함수 이름은 같은 문구, 명사, 동사를 사용한다. 문제가 비슷하면 이야기를 순차적으로 풀어내기 좋고 읽는 사람이 다른 함수를 짐작할 수 있다.

### 함수 인수

무항 < 단항 < 이항 < 다항 순으로 이해, 테스트하기 어렵다.

함수에 사용된 인수가 2개, 3개 필요하다면 독자 클래스 변수로 선언할 가능성을 봐야 한다.

#### 많이 쓰는 단항 형식

- 인수에게 질문을 던짐
- 인수 변환 후 결과를 반환
- 이벤트

이외 다른 단항 함수는 가급적 피한다.

#### 플래그 인수

플래그 인수는 bool 값을 함수의 인수로 넘기는 것을 말한다. true, false에 따라 2가지 일을 처리하므로 피해야 한다.

#### 이항 함수

인수가 2개인 함수는 단항 함수보다 이해하기 어려우나 Point(0,0)와 같이 각 인수의 이름과 순서가 추측이 가능하다.

그렇지 않으면 단항 함수 사용을 노력해야 한다.

#### 삼항 함수

인수가 3개인 함수는 신중히 고려해야 한다.

#### 동사와 키워드

함수의 의도, 인수의 순서를 제대로 표현하기 위해서 좋은 함수 이름이 필수다.

- 단항 함수는 함수와 인수가 동사와 명사(목적어) 쌍을 이루어야 한다. ex) write(name), writeField(name)
- 함수 이름에 인수 이름을 추가하면 인수 순서를 기억할 필요가 없다. ex) assertExpectedEqualsActual(expected,  actual)

### 부수 효과를 일으키지 마라

부수 효과는 함수가 한 가지 일만 한다는 약속을 깬다. 이는 순서 강제, 시간적 결합, 예상치 못한 클래스 수정, 인수 시스템 전역 변수 수정 등의 문제를 일으킨다.

#### 출력인수

출력 인수는 함수의 인수로 전달되고 함수 내부에서 수정되어 결과를 반환 하는 인수이다. 객체지향을 이용하여 해결 가능하다.(this)

### 명령과 조회를 분리하라

함수는 수행(객체 상태 변경), 응답(객체 정보 반환) 둘 중 하나만 해야 한다.

### 오류 코드보다 예외를 이용한다

명령 함수에서 오류 코드를 반환하면 아래와 같은 문제점을 가진다.

- 명령 조회 분리 규칙 위반
- 명령 함수를 if 문에서 표현식 처럼 사용하기 쉬움(중첩 코드 야기)
- 함수 호출자는 오류 코드를 바로 처리해야 함

예외를 사용하면 아래와 같은 이점이 있다.

- 오류코드 대신 예외를 사용하면 오류 처리 코드를 없어짐
- 오류 코드를 하나하나 확인하지 않아도 됨 -> 중첩 코드 방지

### try-catch 뽑아내기

try-catch는 try-catch는 정상 동작과 오류 처리 동작을 뒤섞는다. 정상 동작은 별도로 분리한다. 오류 처리도 하나의 작업이므로 오류만 처리해야 한다.

### 반복하지 마라

### 함수를 어떻게 짜죠

먼저 생각을 기록하고 읽기 좋게 다듬는다. 원하는데로 읽힐 때 까지 계속 다듬고 고치고 정리한다.
