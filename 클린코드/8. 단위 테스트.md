## 단위 테스트

### TDD 법칙 3가지

1. 실패하는 테스트 작성, 실제 코드 작성X
2. 컴파일이 실패하지 않으면서 실행이 실패하는 정도로만 테스트 작성
3. 현재 실해하는 테스트를 통과할 정도로만 실제코드 작성

### 깨끗한 테스트 코드 유지하기

테스트코드는 실제 코드 못지않게 깨끗하게 짜야 한다.

#### 테스트는 유연성, 유지보수성, 재사용성을 제공한다

테스트 케이스가 없다면 모든 변경이 잠정적 버그다. 그래서 테스트 케이스가 없으면 개발자는 변경을 주저하게 된다.

그라나 테스트 코드가 있으면 변경에 대한 공포는 줄어든다. 그래서 테스트 코드가 지저분하면 코드를 변경하는 능력이 떨어지며 코드 구조를 개선하는 능력도 떨어진다.

### 깨끗한 테스트 코드

테스트 코드에서 가독성은 실제 코드보다 중요하다. 최소의 표현으로 많은 것을 나타내야 한다.

Build-Operate-Check 패턴을 이용한다.

1. 첫 부분은 테스트 자료를 만듦
2. 두 번째 부분은 테스트 자료를 조작
3. 세 번째 부분은 조작한 결과가 올바른지 확인

테스트 코드는 잡다하고 세세한 사항으로 범벅된 코드를 리팩터링 하여 간결하고 표현력이 풍부한 코드로 리팩터링해야 한다.

#### 도메인에 특화된 테스트 언어

테스트 코드로 리팩토링을 하면서 가독성에 집중해야 한다.

테스트 코드를 보면 중복 코드가 발생 한다. 이런 중복 코드를 없애기 위해 리팩토링하다가 테스트 언어(중복을 처리하기 위한 함수의 일종)를 만들게 된다. 이러한 테스트 언어는 테스트 코드를 짜기도 읽기도 쉬워진다.

#### 이중표준

- 테스트 코드는 간결하고 표현력이 풍부해야 한다 그러나 테스트 환경이므로 효율적일 필요는 없다.
- 읽는 방향을 일관되게 유지하자 (단방향으로 위에서 아래 왼쪽에서 오른쪽으로)

### 테스트당 assert1개 사용을 노력한다

- 테스트 하나 당 assert를 최소한으로 사용한다.
- 테스트당 개념 1개를 테스트한다.

### FISRT

깨끗한 테스트는 다음 규칙을 따른다.

- **Fast**: 테스트는 빨리 돌아야 한다.
- **Independent**: 각 테스트는 서로 의존하념 안된다. 각 테스트간 영향이 없어야한다.
- **Repeatable**: 테스트는 어떤 환경에서도 반복 가능해야 한다.
- **Self-Validating**: 테스트 값은 bool(O, X)로 결과가 나와야한다.
- **Timely**: 테스트는 적시에 작성해야한다. 테스트하련느 실제 코드를 구현하기 직전에 구현한다.
