# IP

## IP 주소

### ARP

ARP는 IP 주소로부터 맥 주소를 구하는 IP와 맥 주소의 다리 역할을 수행하는 프로토콜입니다.

ARP를 이용하여 IP 주소를 맥 주소로, RARP를 이용하여 맥 주소를 IP 주소로 변환할 수 있습니다.

#### ARP를 이용한 통신 과정

1. 컴퓨터 A가 ARP request 브로드캐스트를 통해 동일한 IP를 가진 컴퓨터 B의 IP 주소를 찾았습니다.
2. B는 ARP reply 유니캐스트를 통해 맥 주소를 반환합니다.

이로써 IP 주소에 맞는 맥 주소를 찾게 됩니다.

- 유니케스트는 고유 주소로 식별된 하나의 네트워크 목적지에 1:1로 데이터를 전송하는 방식
- 브로드케스트는 송신 호스트가 전송한 데이터가 네트워크에 연결된 모든 호스트에 전송되는 방식

## 라우팅 테이블

라우팅 테이블은 목적지 정보와 그 목적지로 가기 위한 방법이 들어 있는 리스트입니다. 라우터에 있습니다.

라우팅 테이블에는 게이트웨이와 모든 목적지에 대해 해당 목적지에 도달하기 위해 거쳐야 할 다음 라우터의 정보를 가지고 있습니다.

## 게이트웨이

게이트웨이는 다른 통신망, 프로토콜을 사용하는 네트워크 간의 통신을 가능하게 하는 관문 역할을 하는 컴퓨터나 소프트웨어를 말합니다.

서로 다른 네트워크 상의 통신 프로토콜을 변환해 주는 역할을 합니다.

## 홉바이홉

홉바이홉은 IP주소를 통해 통신하는 과정을 의미합니다.

홉은 두 발로 뛰는 것을 의미합니다. 라우터에 있는 라우팅 테이블을 참조하여 목적지까지 도착을 의미합니다.

## IP 주소 체계

IPv4와 IPv6가 있습니다.

IPv4는 8비트 x 4, IPv6는 16비트 x 4의 조합으로 구성됩니다.

### 클래스 기반 할당 방식

![Alt text](<../기초/images/네트워크 계층/network-class.drawio.svg>)

- [네트워크 클래스](<../기초/네트워크 계층.md#네트워크-클래스>)

위의 방식은 버리는 주소가 많은 문제점이 있습니다.

### DHCP(Dynamic Host Configuration Protocol)

DHCP 프로토콜은 IP 주소, 기타 통신 매개 변수를 자동으로 할당하기 위한 네트워크 관리 프로토콜입니다.

인터넷에 접속할 때마다 IP가 자동 할당됩니다.

### NAT(Network Address Translation)

NAT는 패킷이 라우팅 장치를 통해 전송되는 동안 패킷 IP 주소 정보를 수정하여 IP 주소를 다른 주소로 매핑하는 방법입니다.

NAT를 가능하게 하는 소프트웨어는 ICS, RRAS, NetFilter가 있습니다.

NAT는 사설 IP 주소와 공인 IP 주소로 나누어 처리합니다. 하나의 공인 IP 주소를 이용하여 인터넷을 사용할 수 있습니다. 공유기에 NAT 기능이 있기 때문에 같은 공유기의 여러 컴퓨터가 인터넷을 이용할 수 있습니다.

#### NAT의 보안

NAT는 공인 IP 뒤에 사설 IP가 있기 때문에 내부 네트워크에 대한 보안이 가능합니다.

#### NAT의 단점

NAT의 단점은 같은 공인 IP에 여러 명의 호스트가 동시에 인터넷을 사용하면 속도 저하가 발생하게 됩니다.
