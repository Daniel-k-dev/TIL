# 내 컴퓨터로 google에 접속하기 까지 과정

내 컴퓨터 -> DNS 서버 -> ip 획득 -> 해당 서버 IP로 요청 -> 서버가 요청에 맞는 응답

## 설명

DNS서버에는 `google.com`에 대한 ip 주소를 가지고 있습니다. 사용자가 브라우저의 주소창에 `google.com`을 치고 엔터를 누를 때 사용자의 컴퓨터는 DNS 서버에 접속하여 `google.com`에 대한 ip를 받아옵니다.

받아온 ip로 다시 요청을 하게되면, 구글의 서버는 사용자의 요청에 대한 응답을 보내고 브라우저에 표시합니다.

# 내부 ip 외부 ip

인터넷 회사 ISP로 부터 계약을 통해 들어오는 외부 선의 IP를 외부 ip (public address), 이러한 외부 선을 공유기에 연결하여 공유기로부터 할당되는 ip를 내부ip (private address)라고 합니다.

외부 ip는 공유기에 할당되고 내부 ip는 컴퓨터, 모바일, 노트북등에 할당됩니다.

## 포트 포워딩

공유기를 통해 연결된 컴퓨터를 외부의 컴퓨터가 접속하려면 포트 포워딩이 필요합니다. 즉 공유기의 ISP로 부터 부여받은 IP 주소를 통해 공유기와 연결된 컴퓨터와 접속하는 것을 의미합니다.

포트 포워딩은 외부 ip를 통해 다른 컴퓨터가 접속하는 경우 공유기와 연결된 내부 컴퓨터로의 접속을 허용합니다. 이러한 설정은 공유기에서 설정할 수 있습니다.

포트 포워딩 공유기 : ip번호 : 포트 => 공유기와 연결된 컴퓨터의 내부 ip번호 : 포트
외부에서 공유기의 ip번호로 접속 => 공유기와 연결된 컴퓨터의 서버

# 서버

인터넷을 이용할때 브라우저가 필요한 것처럼 서버를 열기 위해서는 웹 서버가 필요합니다. (아파치, nginx ...)

[웹 서버 프로그램에 대한 설명](../인프라/웹서버프로그램.md)

# DNS

클라이언트가 인터넷에 접속할때 DNS를 이용하여 IP주소를 얻어 서버에 접속하지만 `/etc/hosts` 파일에 저장되어있는 url을 먼저 확인합니다.

즉 접속하려는 사이트의 도메인이 `hosts` 파일에 있는지 확인 후 없으면 DNS 서버에게 요청하여 IP주소를 가져오고, 만약 `hosts` 파일에 있다면 DNS 서버에 요청하지 않습니다.

`/etc/hosts.equiv`는 DNS 서버의 IP 주소를 가지고 있으며 여러개일 수 있습니다. 이는 백업용이거나 분산용입니다.